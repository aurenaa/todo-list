(()=>{"use strict";function e(e){localStorage.setItem(`task-${e.id}`,JSON.stringify(e))}function t(e){localStorage.setItem(`list-${e.id}`,JSON.stringify(e))}function n(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n.startsWith("task-")){const t=localStorage.getItem(n);e.push(JSON.parse(t))}}return e}function d(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n.startsWith("list-")){const t=localStorage.getItem(n);e.push(JSON.parse(t))}}return e}class c{constructor(e,t,n,d,c,o,a=null){this.title=e,this.description=t,this.dueDate=n,this.priority=d,this.list=c,this.done=o,this.id=a}}function o(t){return null==t.id&&(t.id=function(){let e=-1;for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));n&&n.id>e&&(e=n.id)}return e+1}()),e(t),t.id}function a(t,d){const c=n().find((e=>e.id===t));c?(c.done=d,e(c)):console.log("No task with that ID.")}function l(e,n){const c=d().find((t=>t.name===e));c?(c.todos.push(n),t(c)):console.log("No list with that name.")}const s=class{constructor(e,t=[]){this.name=e,this.todos=t}},i=function(){const e=document.querySelector(".page-content");if(!e)return;if(document.querySelector(".list-form"))return;const n=document.createElement("div");n.classList.add("list-form"),e.appendChild(n);const d=document.createElement("div");d.classList.add("overlay");const c=document.createElement("div");c.classList.add("form-div-list");const o=document.createElement("form");o.classList.add("contact-form");const a=document.createElement("div");a.classList.add("btn-div"),o.appendChild(a);const l=document.createElement("button");l.classList.add("cancel-btn"),l.textContent="Cancel",a.appendChild(l);const i=document.createElement("button");i.classList.add("add-btn"),i.textContent="Add List",a.appendChild(i);const r=document.createElement("div");r.classList.add("name-div"),o.appendChild(r);const p=document.createElement("label");p.textContent="Name",p.setAttribute("for","name"),r.appendChild(p);const m=document.createElement("input");m.type="text",m.placeholder="Add name ...",m.id="name",r.appendChild(m),c.appendChild(o),d.appendChild(c),n.appendChild(d),l.addEventListener("click",(()=>{taskForm.remove()})),i.addEventListener("click",(()=>{let e=new s(m.value);var n;console.log(e),(n=e).id=function(){let e=-1;for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));n&&n.id>e&&(e=n.id)}return e+1}(),t(n),h()}))},r=function(e,t){const n=document.querySelector(".page-content");if(!n)return;const d=document.createElement("div");d.classList.add("delete-todo"),n.appendChild(d);const c=document.createElement("div");c.classList.add("overlay"),n.appendChild(c);const o=document.createElement("h3");o.textContent="Confirmation?",d.appendChild(o),c.appendChild(d);const a=document.createElement("p");a.textContent="Are you sure you want to delete this task? This action cannot be undone.",d.appendChild(a);const l=document.createElement("div");l.classList.add("btn-div"),d.appendChild(l);const s=document.createElement("button");s.classList.add("cancel-btn"),s.textContent="Cancel",l.appendChild(s);const i=document.createElement("button");i.classList.add("delete-btn"),i.textContent="Delete",l.appendChild(i),s.addEventListener("click",(()=>{d.remove(),c.remove()})),i.addEventListener("click",(()=>{!function(e){localStorage.removeItem(`task-${e}`)}(e),t.remove(),c.remove()}))},p=function(e,t){const n=document.querySelector(".page-content");if(!n)return;const a=function(e){const t=localStorage.getItem(`task-${e}`);return console.log("task stored:",t),t?JSON.parse(t):(console.log("Task not found in local storage."),null)}(e);if(document.querySelector(".task-form"))return;const s=document.createElement("div");s.classList.add("task-form"),n.appendChild(s);const i=document.createElement("div");i.classList.add("overlay");const r=document.createElement("div");r.classList.add("form-div");const p=document.createElement("form");p.classList.add("contact-form");const m=document.createElement("div");m.classList.add("btn-div"),p.appendChild(m);const u=document.createElement("button");u.classList.add("cancel-btn"),u.textContent="Cancel",m.appendChild(u);const C=document.createElement("button");C.classList.add("edit-btn-form"),C.textContent="Edit",m.appendChild(C);const E=document.createElement("div");E.classList.add("title-div"),p.appendChild(E);const v=document.createElement("label");v.textContent="Title",v.setAttribute("for","title"),E.appendChild(v);const f=document.createElement("input");f.type="text",f.placeholder=a.title,f.id="title",E.appendChild(f);const b=document.createElement("div");b.classList.add("description-div"),p.appendChild(b);const g=document.createElement("label");g.textContent="Description",g.setAttribute("for","description"),b.appendChild(g);const y=document.createElement("textarea");y.placeholder=a.description,y.id="description",b.appendChild(y);const k=document.createElement("div");k.classList.add("date-div"),p.appendChild(k);const x=document.createElement("label");x.textContent="Due Date",x.setAttribute("for","due-date"),k.appendChild(x);const S=document.createElement("input");S.type="date",S.value=a.dueDate?a.dueDate:"",S.id="due-date",k.appendChild(S);const A=document.createElement("div");A.classList.add("priority-list"),p.appendChild(A);const D=document.createElement("div");D.classList.add("priority-div"),A.appendChild(D);const q=document.createElement("label");q.textContent="Priority",q.setAttribute("for","priority"),D.appendChild(q);const w=document.createElement("input");w.type="checkbox",w.id="priority",D.appendChild(w);const N=document.createElement("div");N.classList.add("dropdown-div"),A.appendChild(N);const I=document.createElement("label");I.textContent="List",I.setAttribute("for","list"),N.appendChild(I);const O=document.createElement("select");O.id="list-dropdown",N.appendChild(O);const F=a.list||"Allt tasks",J=document.createElement("option");J.textContent="All tasks","All tasks"===F&&(J.selected=!0),O.appendChild(J),d().forEach((e=>{if(e){const t=document.createElement("option");t.textContent=e.name,e.name===F&&(t.selected=!0),O.appendChild(t)}})),a.priority&&(w.checked=!0),r.appendChild(p),i.appendChild(r),s.appendChild(i),u.addEventListener("click",(()=>{s.remove()})),C.addEventListener("click",(()=>{f.value||(f.value=f.placeholder),y.value||(y.value=y.placeholder),S.value||(S.value=S.placeholder);const e=O.value;let n=new c(f.value,y.value,S.value,w.checked,e,a.done,a.id);console.log(n),o(n),l(e,a.id),t.remove(),L(),h()}))};let m=null,u=null;function h(){const e=document.querySelector(".lists"),t=document.querySelector(".all");e&&(u=t,e.innerHTML="",d().forEach((n=>{if(n){const d=document.createElement("div");d.classList.add("list-div");const c=document.createElement("p");c.textContent=n.name,d.appendChild(c),e.appendChild(d),d.addEventListener("click",(()=>{m=n.todos,d.style.backgroundColor="#8D99AE",E(m),u&&u!==d&&(u.style.backgroundColor="#EDF2F4"),"#8D99AE"==d.style.backgroundColor?(d.style.backgroundColor="#EDF2F4",u=null):(d.style.backgroundColor="#8D99AE",u=d)})),t.addEventListener("click",(()=>{E(),u=t,d.style.backgroundColor="#EDF2F4",u.style.backgroundColor="#8D99AE"}))}})))}let C=null;function E(e){const t=document.querySelector(".main-page");t&&(t.innerHTML="",n().forEach((n=>{if(n)if(null!=e){for(let d=0;d<e.length;d++)if(n.id==e[d]){const e=v(n);t.appendChild(e)}}else{const e=v(n);t.appendChild(e)}})))}function v(e){const t=document.createElement("div");t.classList.add("task-div");const n=document.createElement("img");n.classList.add("task-menu"),n.src="/src/Assets/menu.png";const d=document.createElement("div");d.classList.add("task-btn");const c=document.createElement("button");c.classList.add("edit-btn"),c.textContent="Edit..";const o=document.createElement("button");o.classList.add("remove-btn"),o.textContent="Remove",d.appendChild(c),d.appendChild(o),t.appendChild(d),n.addEventListener("click",(()=>{C&&C!==d&&(C.style.display="none"),"block"===d.style.display?(d.style.display="none",C=null):(d.style.display="block",C=d)})),c.addEventListener("click",(()=>{p(e.id,t)})),o.addEventListener("click",(()=>{r(e.id,t)}));const l=document.createElement("h3");l.classList.add("task-title"),l.textContent=e.title;const s=document.createElement("p");s.textContent=e.description;const i=document.createElement("p");i.textContent=`Due: ${e.dueDate}`;const m=document.createElement("p");m.textContent="Priority: "+(e.priority?"High":"Normal");const u=document.createElement("p");u.textContent=`List: ${e.list}`;const h=document.createElement("div");h.classList.add("done-div");const E=document.createElement("input");E.classList.add("done-checkbox"),E.type="checkbox",E.id="done";const v=document.createElement("label");return v.textContent="Done",v.setAttribute("for","done"),h.appendChild(E),h.appendChild(v),e.done&&(l.style.textDecoration="line-through",E.checked=!0),E.addEventListener("change",(function(){this.checked?(l.style.textDecoration="line-through",a(e.id,!0)):(l.style.textDecoration="none",a(e.id,!1))})),t.appendChild(l),t.appendChild(s),t.appendChild(i),t.appendChild(m),t.appendChild(u),t.appendChild(n),t.appendChild(h),t}const L=function(){const e=document.querySelector(".content"),t=document.createElement("div");t.classList.add("page-header"),e.appendChild(t);const n=document.createElement("p");n.classList.add("site-name"),n.textContent="todo",t.appendChild(n);const a=document.createElement("img");a.src="/src/Assets/add.png",a.classList.add("add-task-btn"),t.appendChild(a),a.addEventListener("click",(()=>{!function(){const e=document.querySelector(".page-content");if(!e)return;if(document.querySelector(".task-form"))return;const t=document.createElement("div");t.classList.add("task-form"),e.appendChild(t);const n=document.createElement("div");n.classList.add("overlay");const a=document.createElement("div");a.classList.add("form-div");const s=document.createElement("form");s.classList.add("contact-form");const i=document.createElement("div");i.classList.add("btn-div"),s.appendChild(i);const r=document.createElement("button");r.classList.add("cancel-btn"),r.textContent="Cancel",i.appendChild(r);const p=document.createElement("button");p.classList.add("add-btn"),p.textContent="Add Task",i.appendChild(p);const m=document.createElement("div");m.classList.add("title-div"),s.appendChild(m);const u=document.createElement("label");u.textContent="Title",u.setAttribute("for","title"),m.appendChild(u);const h=document.createElement("input");h.type="text",h.placeholder="Add a title ...",h.id="title",m.appendChild(h);const C=document.createElement("div");C.classList.add("description-div"),s.appendChild(C);const E=document.createElement("label");E.textContent="Description",E.setAttribute("for","description"),C.appendChild(E);const v=document.createElement("textarea");v.placeholder="Add a description ...",v.id="description",C.appendChild(v);const f=document.createElement("div");f.classList.add("date-div"),s.appendChild(f);const b=document.createElement("label");b.textContent="Due Date",b.setAttribute("for","due-date"),f.appendChild(b);const g=document.createElement("input");g.type="date",g.id="due-date",f.appendChild(g);const y=document.createElement("div");y.classList.add("priority-list"),s.appendChild(y);const k=document.createElement("div");k.classList.add("priority-div"),y.appendChild(k);const x=document.createElement("label");x.textContent="Priority",x.setAttribute("for","priority"),k.appendChild(x);const S=document.createElement("input");S.type="checkbox",S.id="priority",k.appendChild(S);const A=document.createElement("div");A.classList.add("dropdown-div"),y.appendChild(A);const D=document.createElement("label");D.textContent="List",D.setAttribute("for","list"),A.appendChild(D);const q=document.createElement("select");q.id="list-dropdown",A.appendChild(q);const w=document.createElement("option");w.textContent="All tasks",q.appendChild(w),d().forEach((e=>{if(e){document.createElement("div").classList.add("list-div");const t=document.createElement("option");t.textContent=e.name,q.appendChild(t)}})),a.appendChild(s),n.appendChild(a),t.appendChild(n),r.addEventListener("click",(()=>{t.remove()})),p.addEventListener("click",(()=>{let e=new c(h.value,v.value,g.value,S.checked,q.value,!1);const t=o(e);l(q.value,t),console.log(e.id),L()}))}()}));const s=document.createElement("div");s.classList.add("page-content"),e.appendChild(s);const r=document.createElement("div");r.classList.add("side-bar"),s.appendChild(r);const p=document.createElement("div");p.classList.add("main-page"),s.appendChild(p),document.addEventListener("DOMContentLoaded",(()=>{E(),h()}));const m=document.createElement("div");m.classList.add("all"),r.appendChild(m);const u=document.createElement("img");u.classList.add("icon-all"),u.src="/src/Assets/home.png",m.appendChild(u);const C=document.createElement("p");C.textContent="All tasks",m.appendChild(C);const v=document.createElement("div");v.classList.add("lists"),r.appendChild(v);const f=document.createElement("div");f.classList.add("add-list"),r.appendChild(f);const b=document.createElement("img");b.src="/src/Assets/add.png",b.classList.add("add-task-btn"),f.appendChild(b),b.addEventListener("click",(()=>{i()}));const g=document.createElement("p");g.textContent="Create new list",g.classList.add("add-list-text"),f.appendChild(g)};L()})();