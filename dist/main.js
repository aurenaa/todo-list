(()=>{"use strict";function e(e){localStorage.setItem(`task-${e.id}`,JSON.stringify(e))}function t(e){localStorage.setItem(`list-${e.id}`,JSON.stringify(e))}function n(e){const t=localStorage.getItem(`task-${e}`);return t?JSON.parse(t):(console.log("Task not found in local storage."),null)}function d(e){const t=localStorage.getItem(`list-${e}`);return t?JSON.parse(t):(console.log("List not found in local storage."),null)}function c(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n.startsWith("task-")){const t=localStorage.getItem(n);e.push(JSON.parse(t))}}return e}function a(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n.startsWith("list-")){const t=localStorage.getItem(n);e.push(JSON.parse(t))}}return e}class o{constructor(e,t,n,d,c,a,o,l=null){this.title=e,this.description=t,this.dueDate=n,this.priority=d,this.list=c,this.done=a,this.archived=o,this.id=l}}function l(t){return null==t.id&&(t.id=function(){let e=-1;for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));n&&n.id>e&&(e=n.id)}return e+1}()),e(t),t.id}function s(t,n){const d=c().find((e=>e.id===t));d?(d.done=n,e(d)):console.log("No task with that ID.")}class i{constructor(e,t=[],n=null){this.name=e,this.todos=t,this.id=n}}function r(e){return null==e.id&&(e.id=function(){let e=-1;for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));n&&n.id>e&&(e=n.id)}return e+1}()),t(e),e.id}function m(e,n){if("All tasks"===e)return;const d=a().find((t=>t.name===e));d?(d.todos=d.todos.filter((e=>e!==n)),t(d)):console.log("No list with that name.")}function p(e,n){const d=a().find((t=>t.name===e));if(d)d.todos.push(n),t(d);else{if("All tasks"==d)return;console.log("No list with that name.")}}const u=function(e,t){const d=document.querySelector(".page-content");if(!d)return;const c=document.createElement("div");c.classList.add("delete-todo"),d.appendChild(c);const a=document.createElement("div");a.classList.add("overlay"),d.appendChild(a);const o=document.createElement("h3");o.textContent="Confirmation?",c.appendChild(o),a.appendChild(c);const l=document.createElement("p");l.textContent="Are you sure you want to delete this task? This action cannot be undone.",c.appendChild(l);const s=document.createElement("div");s.classList.add("btn-div"),c.appendChild(s);const i=document.createElement("button");i.classList.add("cancel-btn"),i.textContent="Cancel",s.appendChild(i);const r=document.createElement("button");r.classList.add("delete-btn"),r.textContent="Delete",s.appendChild(r),i.addEventListener("click",(()=>{c.remove(),a.remove()})),r.addEventListener("click",(()=>{const d=n(e).list;!function(e){localStorage.removeItem(`task-${e}`)}(e),m(d,e),t.remove(),a.remove()}))},h=function(t,c){const a=document.querySelector(".page-content");if(!a)return;const o=d(t),l=document.createElement("div");l.classList.add("delete-todo"),a.appendChild(l);const s=document.createElement("div");s.classList.add("overlay"),a.appendChild(s);const i=document.createElement("h3");i.textContent="Confirmation?",l.appendChild(i),s.appendChild(l);const r=document.createElement("p");r.textContent="Are you sure you want to delete this list? This action cannot be undone.",l.appendChild(r);const p=document.createElement("div");p.classList.add("btn-div"),l.appendChild(p);const u=document.createElement("button");u.classList.add("cancel-btn"),u.textContent="Cancel",p.appendChild(u);const h=document.createElement("button");h.classList.add("delete-btn"),h.textContent="Delete",p.appendChild(h),u.addEventListener("click",(()=>{l.remove(),s.remove()})),h.addEventListener("click",(()=>{o.todos.forEach((t=>{const d=n(t);d&&(d.list="All tasks",e(d))})),o.todos.forEach((e=>{m(o.name,e.id)})),function(e){localStorage.removeItem(`list-${e}`)}(t),c.remove(),s.remove()}))},C=function(e,t){const d=document.querySelector(".page-content");if(!d)return;const c=document.createElement("div");c.classList.add("archive-todo"),d.appendChild(c);const a=document.createElement("div");a.classList.add("overlay"),d.appendChild(a);const s=document.createElement("h3");s.textContent="Confirmation?",c.appendChild(s),a.appendChild(c);const i=document.createElement("p");i.textContent="Are you sure you want to archive this task? You can restore it at any time.",c.appendChild(i);const r=document.createElement("div");r.classList.add("btn-div"),c.appendChild(r);const m=document.createElement("button");m.classList.add("cancel-btn"),m.textContent="Cancel",r.appendChild(m);const p=document.createElement("button");p.classList.add("archive-button"),p.textContent="Archive task",r.appendChild(p),m.addEventListener("click",(()=>{c.remove(),a.remove()})),p.addEventListener("click",(()=>{const d=n(e);l(new o(d.title,d.description,d.dueDate,d.priority,d.list,d.done,!0,d.id)),t.remove(),D(),g(),a.remove()}))},v=function(e,t){const d=document.querySelector(".page-content");if(!d)return;const c=document.createElement("div");c.classList.add("archive-todo"),d.appendChild(c);const a=document.createElement("div");a.classList.add("overlay"),d.appendChild(a);const s=document.createElement("h3");s.textContent="Confirmation?",c.appendChild(s),a.appendChild(c);const i=document.createElement("p");i.textContent="Are you sure you want to unarchive this task?",c.appendChild(i);const r=document.createElement("div");r.classList.add("btn-div"),c.appendChild(r);const m=document.createElement("button");m.classList.add("cancel-btn"),m.textContent="Cancel",r.appendChild(m);const p=document.createElement("button");p.classList.add("archive-button"),p.textContent="Unarchive task",r.appendChild(p),m.addEventListener("click",(()=>{c.remove(),a.remove()})),p.addEventListener("click",(()=>{const d=n(e);l(new o(d.title,d.description,d.dueDate,d.priority,d.list,d.done,!1,d.id)),t.remove(),D(),g(),a.remove()}))},E=function(e,t){const d=document.querySelector(".page-content");if(!d)return;const c=n(e);if(document.querySelector(".task-form"))return;const s=document.createElement("div");s.classList.add("task-form"),d.appendChild(s);const i=document.createElement("div");i.classList.add("overlay");const r=document.createElement("div");r.classList.add("form-div");const u=document.createElement("form");u.classList.add("contact-form");const h=document.createElement("div");h.classList.add("btn-div"),u.appendChild(h);const C=document.createElement("button");C.classList.add("cancel-btn"),C.textContent="Cancel",h.appendChild(C);const v=document.createElement("button");v.classList.add("edit-btn-form"),v.textContent="Edit",h.appendChild(v);const E=document.createElement("div");E.classList.add("title-div"),u.appendChild(E);const L=document.createElement("label");L.textContent="Title",L.setAttribute("for","title"),E.appendChild(L);const f=document.createElement("input");f.type="text",f.placeholder=c.title,f.id="title",E.appendChild(f);const b=document.createElement("div");b.classList.add("description-div"),u.appendChild(b);const k=document.createElement("label");k.textContent="Description",k.setAttribute("for","description"),b.appendChild(k);const y=document.createElement("textarea");y.placeholder=c.description,y.id="description",b.appendChild(y);const x=document.createElement("div");x.classList.add("date-div"),u.appendChild(x);const A=document.createElement("label");A.textContent="Due Date",A.setAttribute("for","due-date"),x.appendChild(A);const S=document.createElement("input");S.type="date",S.value=c.dueDate?c.dueDate:"",S.id="due-date",x.appendChild(S);const w=document.createElement("div");w.classList.add("priority-list"),u.appendChild(w);const q=document.createElement("div");q.classList.add("priority-div"),w.appendChild(q);const N=document.createElement("label");N.textContent="Priority",N.setAttribute("for","priority"),q.appendChild(N);const I=document.createElement("input");I.type="checkbox",I.id="priority",q.appendChild(I);const F=document.createElement("div");F.classList.add("dropdown-div"),w.appendChild(F);const O=document.createElement("label");O.textContent="List",O.setAttribute("for","list"),F.appendChild(O);const J=document.createElement("select");J.id="list-dropdown",F.appendChild(J);const T=c.list||"All tasks",$=document.createElement("option");$.textContent="All tasks","All tasks"===T&&($.selected=!0),J.appendChild($),a().forEach((e=>{if(e){const t=document.createElement("option");t.textContent=e.name,e.name===T&&(t.selected=!0),J.appendChild(t)}})),c.priority&&(I.checked=!0),r.appendChild(u),i.appendChild(r),s.appendChild(i),C.addEventListener("click",(()=>{s.remove()})),v.addEventListener("click",(()=>{f.value||(f.value=f.placeholder),y.value||(y.value=y.placeholder),S.value||(S.value=S.placeholder);const e=J.value;l(new o(f.value,y.value,S.value,I.checked,e,c.done,c.id)),e!==T&&("All tasks"!==T&&m(T,c.id),"All tasks"!==e&&p(e,c.id)),t.remove(),D(),g()}))},L=function(e,t){const n=document.querySelector(".page-content");if(!n)return;const c=d(e);if(console.log(c.todos),document.querySelector(".task-form"))return;const a=document.createElement("div");a.classList.add("task-form"),n.appendChild(a);const o=document.createElement("div");o.classList.add("overlay");const l=document.createElement("div");l.classList.add("form-div-list");const s=document.createElement("form");s.classList.add("contact-form");const m=document.createElement("div");m.classList.add("btn-div"),s.appendChild(m);const p=document.createElement("button");p.classList.add("cancel-btn"),p.textContent="Cancel",m.appendChild(p);const u=document.createElement("button");u.classList.add("edit-btn-form"),u.textContent="Edit",m.appendChild(u);const h=document.createElement("div");h.classList.add("name-div"),s.appendChild(h);const C=document.createElement("label");C.textContent="Name",C.setAttribute("for","name"),h.appendChild(C);const v=document.createElement("input");v.type="text",v.placeholder=c.name,v.id="title",h.appendChild(v),l.appendChild(s),o.appendChild(l),a.appendChild(o),p.addEventListener("click",(()=>{a.remove()})),u.addEventListener("click",(()=>{v.value||(v.value=v.placeholder),r(new i(v.value,c.todos,c.id)),t.remove(),D(),g()}))};let f=null,b=null,k=!1,y=null;function g(){const e=document.querySelector(".lists"),t=document.querySelector(".all");e&&(b=t,e.innerHTML="",a().forEach((n=>{if(n){const d=document.createElement("div");d.classList.add("list-div");const c=document.createElement("p");c.textContent=n.name;const a=document.createElement("img");a.classList.add("list-menu"),a.src="/src/Assets/menu.png",a.title="Show actions",d.appendChild(c),d.appendChild(a),e.appendChild(d),d.addEventListener("click",(()=>{f=n.todos,d.style.backgroundColor="#8D99AE",A(f),b&&b!==d&&(b.style.backgroundColor="#EDF2F4"),"#8D99AE"==d.style.backgroundColor?(d.style.backgroundColor="#EDF2F4",b=null):(d.style.backgroundColor="#8D99AE",b=d)})),t.addEventListener("click",(()=>{k=!1,f=null,A(),b&&b!==t&&(b.style.backgroundColor="#EDF2F4"),t.style.backgroundColor="#8D99AE",b=t}));const o=document.createElement("div");o.classList.add("list-btn");const l=document.createElement("button");l.classList.add("edit-btn"),l.textContent="Edit..";const s=document.createElement("button");s.classList.add("remove-btn"),s.textContent="Remove",o.appendChild(l),o.appendChild(s),d.appendChild(o),a.addEventListener("click",(()=>{y&&y!==o&&(y.style.display="none"),"block"===o.style.display?(o.style.display="none",y=null):(o.style.display="block",y=o)})),l.addEventListener("click",(()=>{L(n.id,d)})),s.addEventListener("click",(()=>{h(n.id,d)}))}})))}let x=null;function A(e){const t=document.querySelector(".main-page");t&&(t.innerHTML="",c().forEach((n=>{if(n&&(!k||n.archived)&&(k||!n.archived))if(null!=e){if(e.includes(n.id)){const e=S(n);t.appendChild(e)}}else{const e=S(n);t.appendChild(e)}})))}function S(e){const t=document.createElement("div");t.classList.add("task-div");const n=document.createElement("img");n.classList.add("task-menu"),n.src="/src/Assets/menu.png",n.title="Show actions";const d=document.createElement("div");d.classList.add("task-btn");const c=document.createElement("button");c.classList.add("edit-btn"),c.textContent="Edit..";const a=document.createElement("button");a.classList.add("remove-btn"),a.textContent="Remove";const o=document.createElement("button");o.classList.add("archive-btn"),e.archived?o.textContent="Unarchive":o.textContent="Archive",d.appendChild(c),d.appendChild(a),d.appendChild(o),t.appendChild(d),n.addEventListener("click",(()=>{x&&x!==d&&(x.style.display="none"),"block"===d.style.display?(d.style.display="none",x=null):(d.style.display="block",x=d)})),c.addEventListener("click",(()=>{E(e.id,t)})),a.addEventListener("click",(()=>{u(e.id,t)})),o.addEventListener("click",(()=>{e.archived?v(e.id,t):C(e.id,t)}));const l=document.createElement("h3");l.classList.add("task-title"),l.textContent=e.title;const i=document.createElement("p");i.classList.add("description"),i.textContent=e.description;const r=document.createElement("p");r.textContent=`Due: ${e.dueDate}`;const m=document.createElement("p");m.textContent="Priority: "+(e.priority?"High":"Normal");const p=document.createElement("p");p.textContent=`List: ${e.list}`;const h=document.createElement("div");h.classList.add("done-div");const L=document.createElement("input");L.classList.add("done-checkbox"),L.type="checkbox",L.id="done",L.title="Mark task as complete";const f=document.createElement("label");return f.textContent="Done",f.setAttribute("for","done"),h.appendChild(L),h.appendChild(f),e.done&&(l.style.textDecoration="line-through",L.checked=!0),L.addEventListener("change",(function(){this.checked?(l.style.textDecoration="line-through",s(e.id,!0)):(l.style.textDecoration="none",s(e.id,!1))})),t.appendChild(l),t.appendChild(i),t.appendChild(r),t.appendChild(m),t.appendChild(p),t.appendChild(n),t.appendChild(h),t}const D=function(){const e=document.querySelector(".content"),t=document.createElement("div");t.classList.add("page-header"),e.appendChild(t);const n=document.createElement("p");n.classList.add("site-name"),n.textContent="todo",t.appendChild(n);const d=document.createElement("img");d.src="/src/Assets/add.png",d.classList.add("add-task-btn"),d.title="Add task",t.appendChild(d),d.addEventListener("click",(()=>{!function(){const e=document.querySelector(".page-content");if(!e)return;if(document.querySelector(".task-form"))return;const t=document.createElement("div");t.classList.add("task-form"),e.appendChild(t);const n=document.createElement("div");n.classList.add("overlay");const d=document.createElement("div");d.classList.add("form-div");const c=document.createElement("form");c.classList.add("contact-form");const s=document.createElement("div");s.classList.add("btn-div"),c.appendChild(s);const i=document.createElement("button");i.classList.add("cancel-btn"),i.textContent="Cancel",s.appendChild(i);const r=document.createElement("button");r.classList.add("add-btn"),r.textContent="Add Task",s.appendChild(r);const m=document.createElement("div");m.classList.add("title-div"),c.appendChild(m);const u=document.createElement("label");u.textContent="Title",u.setAttribute("for","title"),m.appendChild(u);const h=document.createElement("input");h.type="text",h.placeholder="Add a title ...",h.id="title",m.appendChild(h);const C=document.createElement("div");C.classList.add("description-div"),c.appendChild(C);const v=document.createElement("label");v.textContent="Description",v.setAttribute("for","description"),C.appendChild(v);const E=document.createElement("textarea");E.placeholder="Add a description ...",E.id="description",C.appendChild(E);const L=document.createElement("div");L.classList.add("date-div"),c.appendChild(L);const f=document.createElement("label");f.textContent="Due Date",f.setAttribute("for","due-date"),L.appendChild(f);const b=document.createElement("input");b.type="date",b.id="due-date",L.appendChild(b);const k=document.createElement("div");k.classList.add("priority-list"),c.appendChild(k);const y=document.createElement("div");y.classList.add("priority-div"),k.appendChild(y);const g=document.createElement("label");g.textContent="Priority",g.setAttribute("for","priority"),y.appendChild(g);const x=document.createElement("input");x.type="checkbox",x.id="priority",y.appendChild(x);const A=document.createElement("div");A.classList.add("dropdown-div"),k.appendChild(A);const S=document.createElement("label");S.textContent="List",S.setAttribute("for","list"),A.appendChild(S);const w=document.createElement("select");w.id="list-dropdown",A.appendChild(w);const q=document.createElement("option");q.textContent="All tasks",w.appendChild(q),a().forEach((e=>{if(e){document.createElement("div").classList.add("list-div");const t=document.createElement("option");t.textContent=e.name,w.appendChild(t)}})),d.appendChild(c),n.appendChild(d),t.appendChild(n),i.addEventListener("click",(()=>{t.remove()})),r.addEventListener("click",(()=>{const e=l(new o(h.value,E.value,b.value,x.checked,w.value,!1,!1));p(w.value,e),D()}))}()}));const c=document.createElement("div");c.classList.add("page-content"),e.appendChild(c);const s=document.createElement("div");s.classList.add("side-bar"),c.appendChild(s);const m=document.createElement("div");m.classList.add("main-page"),c.appendChild(m),document.addEventListener("DOMContentLoaded",(()=>{A(),g()}));const u=document.createElement("div");u.classList.add("all"),s.appendChild(u);const h=document.createElement("img");h.classList.add("icon-all"),h.src="/src/Assets/home.png",u.appendChild(h);const C=document.createElement("p");C.textContent="All tasks",u.appendChild(C),u.title="All tasks";const v=document.createElement("div");v.classList.add("lists"),s.appendChild(v);const E=document.createElement("div");E.classList.add("add-list"),s.appendChild(E);const L=document.createElement("img");L.src="/src/Assets/add.png",L.classList.add("add-task-btn"),E.appendChild(L),L.addEventListener("click",(()=>{a().length>=7?alert("You can create up to 7 lists only."):function(){const e=document.querySelector(".page-content");if(!e)return;if(document.querySelector(".list-form"))return;const t=document.createElement("div");t.classList.add("list-form"),e.appendChild(t);const n=document.createElement("div");n.classList.add("overlay");const d=document.createElement("div");d.classList.add("form-div-list");const c=document.createElement("form");c.classList.add("contact-form");const a=document.createElement("div");a.classList.add("btn-div"),c.appendChild(a);const o=document.createElement("button");o.classList.add("cancel-btn"),o.textContent="Cancel",a.appendChild(o);const l=document.createElement("button");l.classList.add("add-btn"),l.textContent="Add List",a.appendChild(l);const s=document.createElement("div");s.classList.add("name-div"),c.appendChild(s);const m=document.createElement("label");m.textContent="Name",m.setAttribute("for","name"),s.appendChild(m);const p=document.createElement("input");p.type="text",p.placeholder="Add name ...",p.id="name",s.appendChild(p),d.appendChild(c),n.appendChild(d),t.appendChild(n),o.addEventListener("click",(()=>{taskForm.remove()})),l.addEventListener("click",(()=>{if(""!=p.value){let e=new i(p.value);console.log(e),r(e),g()}else alert("Error: List must have a name.")}))}()}));const y=document.createElement("p");y.textContent="Create new list",y.classList.add("add-list-text"),E.appendChild(y);const x=document.createElement("div");x.classList.add("archived-task"),s.appendChild(x);const S=document.createElement("img");S.src="/src/Assets/archive.png",S.classList.add("archived-task-img"),x.appendChild(S),x.addEventListener("click",(()=>{k=!0,f=null,document.querySelectorAll(".list-div, .all").forEach((e=>{e.style.backgroundColor="#EDF2F4"})),b=null,A()}));const w=document.createElement("p");w.textContent="Archived tasks",w.classList.add("archived-task-text"),x.appendChild(w)};D()})();